// Generated by CoffeeScript 1.7.1
var convert_to_BufferGeometry, dae_canvas, dae_timer, done_dae, done_json, done_obj, done_stl, json_canvas, json_timer, load_dae, load_json, load_obj, load_stl, obj_canvas, obj_timer, stl_canvas, stl_timer;

dae_canvas = new DefaultCanvas($('#dae.container'));

dae_canvas.camera.position = new THREE.Vector3(2, 0, 1);

dae_canvas.controls.target = new THREE.Vector3(0, 0, 1);

dae_timer = new THREE.Clock();

stl_canvas = new DefaultCanvas($('#stl.container'));

stl_canvas.camera.position = new THREE.Vector3(0, -2, 1);

stl_canvas.controls.target = new THREE.Vector3(0, 0, 1);

stl_timer = new THREE.Clock();

obj_canvas = new DefaultCanvas($('#obj.container'));

obj_canvas.camera.position = new THREE.Vector3(2, 0, 1);

obj_canvas.controls.target = new THREE.Vector3(0, 0, 1);

obj_timer = new THREE.Clock();

json_canvas = new DefaultCanvas($('#json.container'));

json_canvas.camera.position = new THREE.Vector3(0, 1, 2);

json_canvas.controls.target = new THREE.Vector3(0, 1, 0);

json_timer = new THREE.Clock();

convert_to_BufferGeometry = function(obj) {
  var child, g, _i, _len, _ref;
  if (obj.children != null) {
    console.log(obj.name);
    _ref = obj.children;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      child = _ref[_i];
      if (child instanceof THREE.Mesh) {
        if (child.geometry instanceof THREE.Geometry) {
          g = THREE.BufferGeometryUtils.fromGeometry(child.geometry);
          child.geometry = g;
          console.log('Converted a Geometry to a BufferGeometry');
        }
      }
      convert_to_BufferGeometry(child);
    }
  }
  return null;
};

load_dae = function() {
  var loader;
  console.log('Load DAE');
  loader = new THREE.ColladaLoader();
  dae_timer.start();
  return loader.load('monkey.dae', done_dae);
};

done_dae = function(collada) {
  dae_timer.stop();
  console.log(dae_timer.elapsedTime);
  collada.scene.children[0].geometry.computeBoundingBox();
  console.log(collada.scene.children[0].geometry.boundingBox);
  collada.scene.children[0].rotation.y += Math.PI / 2;
  dae_canvas.add(collada.scene.children[0]);
  convert_to_BufferGeometry(dae_canvas.scene);
  return console.log('Loading complete');
};

load_stl = function() {
  var loader;
  console.log('Load STL');
  loader = new THREE.STLLoader();
  loader.addEventListener('load', done_stl);
  stl_timer.start();
  return loader.load('monkey.stl');
};

done_stl = function(event) {
  var geometry, mat, mesh, node;
  stl_timer.stop();
  console.log(stl_timer.elapsedTime);
  mat = new THREE.MeshLambertMaterial({
    color: 0xCCCCCC
  });
  geometry = event.content;
  mesh = new THREE.Mesh(geometry, mat);
  node = new THREE.Object3D();
  node.add(mesh);
  stl_canvas.add(node);
  return console.log('Loading complete');
};

load_obj = function() {
  var loader;
  console.log('Load OBJ');
  loader = new THREE.OBJLoader();
  obj_timer.start();
  return loader.load('monkey.obj', done_obj);
};

done_obj = function(object) {
  obj_timer.stop();
  console.log(obj_timer.elapsedTime);
  obj_canvas.scene.add(object);
  return console.log('Loading complete');
};

load_json = function() {
  var loader;
  console.log('Load json');
  loader = new THREE.JSONLoader();
  json_timer.start();
  return loader.load("monkey.js", done_json);
};

done_json = function(geometry) {
  var mesh;
  json_timer.stop();
  console.log(json_timer.elapsedTime);
  mesh = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({
    color: 0xCCCCCC
  }));
  json_canvas.add(mesh);
  return console.log('Loading complete');
};

$('#dae.container').on('click', function() {
  load_dae();
  return $('#dae.container').off('click');
});

$('#stl.container').on('click', function() {
  load_stl();
  return $('#stl.container').off('click');
});

$('#obj.container').on('click', function() {
  load_obj();
  return $('#obj.container').off('click');
});

$('#json.container').on('click', function() {
  load_json();
  return $('#json.container').off('click');
});

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIvTG9hZHRpbWVUZXN0L2luZGV4LmpzIiwKICAic291cmNlUm9vdCI6ICIiLAogICJzb3VyY2VzIjogWwogICAgIi9Mb2FkdGltZVRlc3QvaW5kZXguanMuY29mZmVlIgogIF0sCiAgIm5hbWVzIjogW10sCiAgIm1hcHBpbmdzIjogIjtBQUFBLElBQUEseU1BQUE7O0FBQUEsVUFBQSxHQUFpQixJQUFBLGFBQUEsQ0FBYyxDQUFBLENBQUUsZ0JBQUYsQ0FBZCxDQUFqQixDQUFBOztBQUFBLFVBQ1UsQ0FBQyxNQUFNLENBQUMsUUFBbEIsR0FBaUMsSUFBQSxLQUFLLENBQUMsT0FBTixDQUFjLENBQWQsRUFBZ0IsQ0FBaEIsRUFBa0IsQ0FBbEIsQ0FEakMsQ0FBQTs7QUFBQSxVQUVVLENBQUMsUUFBUSxDQUFDLE1BQXBCLEdBQWlDLElBQUEsS0FBSyxDQUFDLE9BQU4sQ0FBYyxDQUFkLEVBQWdCLENBQWhCLEVBQWtCLENBQWxCLENBRmpDLENBQUE7O0FBQUEsU0FHQSxHQUFnQixJQUFBLEtBQUssQ0FBQyxLQUFOLENBQUEsQ0FIaEIsQ0FBQTs7QUFBQSxVQUlBLEdBQWlCLElBQUEsYUFBQSxDQUFjLENBQUEsQ0FBRSxnQkFBRixDQUFkLENBSmpCLENBQUE7O0FBQUEsVUFLVSxDQUFDLE1BQU0sQ0FBQyxRQUFsQixHQUFpQyxJQUFBLEtBQUssQ0FBQyxPQUFOLENBQWMsQ0FBZCxFQUFnQixDQUFBLENBQWhCLEVBQW1CLENBQW5CLENBTGpDLENBQUE7O0FBQUEsVUFNVSxDQUFDLFFBQVEsQ0FBQyxNQUFwQixHQUFpQyxJQUFBLEtBQUssQ0FBQyxPQUFOLENBQWMsQ0FBZCxFQUFnQixDQUFoQixFQUFrQixDQUFsQixDQU5qQyxDQUFBOztBQUFBLFNBT0EsR0FBZ0IsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFBLENBUGhCLENBQUE7O0FBQUEsVUFRQSxHQUFpQixJQUFBLGFBQUEsQ0FBYyxDQUFBLENBQUUsZ0JBQUYsQ0FBZCxDQVJqQixDQUFBOztBQUFBLFVB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QUFBLENBQUE7U0FDQSxDQUFBLENBQUUsaUJBQUYsQ0FBb0IsQ0FBQyxHQUFyQixDQUF5QixPQUF6QixFQUYrQjtBQUFBLENBQWpDLENBL0dBLENBQUEiLAogICJzb3VyY2VzQ29udGVudCI6IFsKICAgICJkYWVfY2FudmFzID0gbmV3IERlZmF1bHRDYW52YXMoJCgnI2RhZS5jb250YWluZXInKSlcbmRhZV9jYW52YXMuY2FtZXJhLnBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoMiwwLDEpXG5kYWVfY2FudmFzLmNvbnRyb2xzLnRhcmdldCA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKVxuZGFlX3RpbWVyID0gbmV3IFRIUkVFLkNsb2NrKClcbnN0bF9jYW52YXMgPSBuZXcgRGVmYXVsdENhbnZhcygkKCcjc3RsLmNvbnRhaW5lcicpKVxuc3RsX2NhbnZhcy5jYW1lcmEucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygwLC0yLDEpXG5zdGxfY2FudmFzLmNvbnRyb2xzLnRhcmdldCA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKVxuc3RsX3RpbWVyID0gbmV3IFRIUkVFLkNsb2NrKClcbm9ial9jYW52YXMgPSBuZXcgRGVmYXVsdENhbnZhcygkKCcjb2JqLmNvbnRhaW5lcicpKVxub2JqX2NhbnZhcy5jYW1lcmEucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygyLDAsMSlcbm9ial9jYW52YXMuY29udHJvbHMudGFyZ2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpXG5vYmpfdGltZXIgPSBuZXcgVEhSRUUuQ2xvY2soKVxuanNvbl9jYW52YXMgPSBuZXcgRGVmYXVsdENhbnZhcygkKCcjanNvbi5jb250YWluZXInKSlcbmpzb25fY2FudmFzLmNhbWVyYS5wb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsMSwyKVxuanNvbl9jYW52YXMuY29udHJvbHMudGFyZ2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApXG5qc29uX3RpbWVyID0gbmV3IFRIUkVFLkNsb2NrKClcblxuY29udmVydF90b19CdWZmZXJHZW9tZXRyeSA9IChvYmopIC0+XG4gIGlmIG9iai5jaGlsZHJlbj9cbiAgICBjb25zb2xlLmxvZyhvYmoubmFtZSlcbiAgICBmb3IgY2hpbGQgaW4gb2JqLmNoaWxkcmVuXG4gICAgICBpZiBjaGlsZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hcbiAgICAgICAgIyBDb252ZXJ0IGBHZW9tZXRyeWBzIHRvIGBCdWZmZXJHZW9tZXRyeWBzXG4gICAgICAgIGlmIGNoaWxkLmdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnlcbiAgICAgICAgICBnID0gVEhSRUUuQnVmZmVyR2VvbWV0cnlVdGlscy5mcm9tR2VvbWV0cnkoY2hpbGQuZ2VvbWV0cnkpXG4gICAgICAgICAgY2hpbGQuZ2VvbWV0cnkgPSBnXG4gICAgICAgICAgY29uc29sZS5sb2coJ0NvbnZlcnRlZCBhIEdlb21ldHJ5IHRvIGEgQnVmZmVyR2VvbWV0cnknKVxuICAgICAgIyBSZWN1cnNlXG4gICAgICBjb252ZXJ0X3RvX0J1ZmZlckdlb21ldHJ5KGNoaWxkKVxuICByZXR1cm4gbnVsbFxuXG5sb2FkX2RhZSA9ICgpIC0+XG4gIGNvbnNvbGUubG9nKCdMb2FkIERBRScpXG4gIGxvYWRlciA9IG5ldyBUSFJFRS5Db2xsYWRhTG9hZGVyKClcbiAgZGFlX3RpbWVyLnN0YXJ0KClcbiAgbG9hZGVyLmxvYWQgJ21vbmtleS5kYWUnLCBkb25lX2RhZVxuXG5kb25lX2RhZSA9IChjb2xsYWRhKSAtPlxuICBkYWVfdGltZXIuc3RvcCgpXG4gIGNvbnNvbGUubG9nKGRhZV90aW1lci5lbGFwc2VkVGltZSlcbiAgY29sbGFkYS5zY2VuZS5jaGlsZHJlblswXS5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKVxuICBjb25zb2xlLmxvZyhjb2xsYWRhLnNjZW5lLmNoaWxkcmVuWzBdLmdlb21ldHJ5LmJvdW5kaW5nQm94KVxuICBjb2xsYWRhLnNjZW5lLmNoaWxkcmVuWzBdLnJvdGF0aW9uLnkgKz0gTWF0aC5QSSAvIDJcbiAgZGFlX2NhbnZhcy5hZGQoY29sbGFkYS5zY2VuZS5jaGlsZHJlblswXSlcbiAgY29udmVydF90b19CdWZmZXJHZW9tZXRyeShkYWVfY2FudmFzLnNjZW5lKSAjIGRvZXMgdGhpcyB3b3JrPz9cbiAgY29uc29sZS5sb2coJ0xvYWRpbmcgY29tcGxldGUnKVxuXG5sb2FkX3N0bCA9ICgpIC0+XG4gIGNvbnNvbGUubG9nKCdMb2FkIFNUTCcpXG4gIGxvYWRlciA9IG5ldyBUSFJFRS5TVExMb2FkZXIoKVxuICBsb2FkZXIuYWRkRXZlbnRMaXN0ZW5lciAnbG9hZCcsIGRvbmVfc3RsXG4gICMgbG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgb25Qcm9ncmVzcyk7XG4gIHN0bF90aW1lci5zdGFydCgpXG4gIGxvYWRlci5sb2FkKCdtb25rZXkuc3RsJyk7XG5cbmRvbmVfc3RsID0gKGV2ZW50KSAtPlxuICBzdGxfdGltZXIuc3RvcCgpXG4gIGNvbnNvbGUubG9nKHN0bF90aW1lci5lbGFwc2VkVGltZSlcbiAgbWF0ID0gbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoe2NvbG9yOiAweENDQ0NDQ30pXG4gIGdlb21ldHJ5ID0gZXZlbnQuY29udGVudFxuICAjIGdlb21ldHJ5LmNvbXB1dGVGYWNlTm9ybWFscygpXG4gICMgZ2VvbWV0cnkuY29tcHV0ZVZlcnRleE5vcm1hbHMoKVxuICAjIGJ1ZmZlckdlb21ldHJ5ID0gVEhSRUUuQnVmZmVyR2VvbWV0cnlVdGlscy5mcm9tR2VvbWV0cnkoIGdlb21ldHJ5IClcbiBcbiAgIyBJbmNvZ25pdG8gYmVmb3JlIGxvYWQ6IDIyIEtcbiAgIyBwbGFpbiBHZW9tZXRyeTogNzAtODAgSyAoOTQgd2l0aCBmYWNlIGFuZCB2ZXJ0ZXggbm9ybWFscylcbiAgIyBCdWZmZXJHZW9tZXRyeTogOTAgSywgdGhlbiAzNiBLXG5cbiAgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LG1hdClcbiAgbm9kZSA9IG5ldyBUSFJFRS5PYmplY3QzRCgpXG4gIG5vZGUuYWRkKG1lc2gpXG4gIHN0bF9jYW52YXMuYWRkKG5vZGUpXG4gIGNvbnNvbGUubG9nKCdMb2FkaW5nIGNvbXBsZXRlJylcblxubG9hZF9vYmogPSAoKSAtPlxuICBjb25zb2xlLmxvZygnTG9hZCBPQkonKVxuICBsb2FkZXIgPSBuZXcgVEhSRUUuT0JKTG9hZGVyKClcbiAgb2JqX3RpbWVyLnN0YXJ0KClcbiAgbG9hZGVyLmxvYWQgJ21vbmtleS5vYmonLCBkb25lX29ialxuXG5kb25lX29iaiA9IChvYmplY3QpIC0+XG4gIG9ial90aW1lci5zdG9wKClcbiAgY29uc29sZS5sb2cob2JqX3RpbWVyLmVsYXBzZWRUaW1lKVxuICBvYmpfY2FudmFzLnNjZW5lLmFkZChvYmplY3QpXG4gIGNvbnNvbGUubG9nKCdMb2FkaW5nIGNvbXBsZXRlJylcblxubG9hZF9qc29uID0gKCkgLT5cbiAgY29uc29sZS5sb2coJ0xvYWQganNvbicpXG4gIGxvYWRlciA9IG5ldyBUSFJFRS5KU09OTG9hZGVyKClcbiAganNvbl90aW1lci5zdGFydCgpXG4gIGxvYWRlci5sb2FkIFwibW9ua2V5LmpzXCIsIGRvbmVfanNvblxuXG5kb25lX2pzb24gPSAoZ2VvbWV0cnkpIC0+ICBcbiAganNvbl90aW1lci5zdG9wKClcbiAgY29uc29sZS5sb2coanNvbl90aW1lci5lbGFwc2VkVGltZSlcbiAgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoe2NvbG9yOiAweENDQ0NDQ30pICk7XG4gIGpzb25fY2FudmFzLmFkZChtZXNoKVxuICBjb25zb2xlLmxvZygnTG9hZGluZyBjb21wbGV0ZScpXG5cbiQoJyNkYWUuY29udGFpbmVyJykub24gJ2NsaWNrJywgKCkgLT5cbiAgbG9hZF9kYWUoKVxuICAkKCcjZGFlLmNvbnRhaW5lcicpLm9mZignY2xpY2snKVxuXG4kKCcjc3RsLmNvbnRhaW5lcicpLm9uICdjbGljaycsICgpIC0+XG4gIGxvYWRfc3RsKClcbiAgJCgnI3N0bC5jb250YWluZXInKS5vZmYoJ2NsaWNrJylcblxuJCgnI29iai5jb250YWluZXInKS5vbiAnY2xpY2snLCAoKSAtPlxuICBsb2FkX29iaigpXG4gICQoJyNvYmouY29udGFpbmVyJykub2ZmKCdjbGljaycpXG5cbiQoJyNqc29uLmNvbnRhaW5lcicpLm9uICdjbGljaycsICgpIC0+XG4gIGxvYWRfanNvbigpXG4gICQoJyNqc29uLmNvbnRhaW5lcicpLm9mZignY2xpY2snKVxuIgogIF0KfQ==